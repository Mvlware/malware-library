package com.malware.library.model;
import com.malware.library.controllers.OrderController;
import com.malware.library.repository.BookRepository;
import com.malware.library.repository.OrderBookRepository;
import com.malware.library.repository.OrderRepository;
import com.malware.library.repository.UserRepository;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import com.malware.library.model.*;
import java.time.LocalDate;
import java.util.*;

@RunWith(SpringRunner.class)
@SpringBootTest
public class OrderControllerSaveTest {

    @Autowired
    private OrderRepository orderRepository;

    @Autowired
    private OrderBookRepository orderBookRepository;

    @Autowired
    private BookRepository bookRepository;

    @Autowired
    private UserRepository userRepository;

    @Autowired
    private OrderController orderController;

    @Test
    public void addOrder() throws Exception {
//        Order order = orderRepository.getOne(23L);
//        order.getOrderBooks();
//        Set<OrderBook> books = new HashSet<>(order.getOrderBooks());
        TreeMap<Long, LocalDate> bookIdDates = new TreeMap<>();
        LocalDate date1 = LocalDate.of(2020, 4,24);
        LocalDate date2 = LocalDate.of(2020, 6,24);
        bookIdDates.put(1L, date1);
        bookIdDates.put(2L, date2);
        orderController.save(null,20,null,null, bookIdDates, null, null, 1L, 2L, null);
    }
}



